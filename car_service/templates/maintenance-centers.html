<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Centers</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>

    <body style="background-image: url('maintenance_center_new_background.png'); background-size: cover; background-position: top center; background-repeat: no-repeat;">
    
    <div class="wrapper">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <img src="photo_2025-03-31_23-49-16.jpg" alt="Car Logo">
                <h2>CService</h2>
            </div>
            <nav>
                <ul>
                    <li><a href="home.html"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="map.html"><i class="fas fa-map"></i> Map</a></li>
                    <li><a href="maintenance-centers.html" class="active"><i class="fas fa-tools"></i> Maintenance Centers</a></li>
                    <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
                </ul>
            </nav>
            <div class="help-center">
                <p>Having Trouble?</p>
                <button onclick="location.href='chatbot.html'">Go To Help Center</button>
            </div>            
        </aside>

        <!-- Main Content -->
        <main class="content">
            <header>
                <h2>Maintenance Centers</h2>
                <div class="user-icons">
                    <span><i class="fas fa-bell"></i></span>
                    <span><i class="fas fa-user"></i></span>
                </div>
            </header>
        
            <section class="recently-viewed">
                <h3>Recently Viewed</h3>
                <div class="cards-container" id="recently-viewed"></div>
            </section>
        
            <section class="all-centers">
                <h3>All Maintenance Centers</h3>
                <div class="cards-container" id="all-centers"></div>
                <div class="search-filter-container">
                    <input type="text" id="searchBox" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø±ÙƒØ² ØµÙŠØ§Ù†Ø©...">
                    
                    <select id="filterSelect">
                        <option value="all">ÙƒÙ„ Ø§Ù„Ù…Ø±Ø§ÙƒØ²</option>
                        <option value="rating">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</option>
                        <option value="location">Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø¥Ù„ÙŠÙƒ</option>
                    </select>
                </div>
                
                <div id="maintenanceCenters">
                    <div class="maintenance-center" data-name="AutoFix Garage" data-rating="4.8" data-location="Cairo">
                        <h2>AutoFix Garage</h2>
                        <p>ğŸ“ 123 Ø´Ø§Ø±Ø¹ Ø§Ù„Ù†ØµØ±ØŒ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</p>
                        <p>â­ 4.8 (150 ØªÙ‚ÙŠÙŠÙ…)</p>
                      <button onclick="openDetails('AutoFix Garage', '123 Ø´Ø§Ø±Ø¹ Ø§Ù„Ù†ØµØ±ØŒ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©', 'Ù…ÙØªÙˆØ­ Ø§Ù„Ø¢Ù†', ['ØªØºÙŠÙŠØ± Ø§Ù„Ø²ÙŠØª', 'ÙØ­Øµ Ø´Ø§Ù…Ù„'], ['ØªØºÙŠÙŠØ± Ø§Ù„Ø²ÙŠØª: 200 Ø¬Ù†ÙŠÙ‡', 'ÙØ­Øµ Ø´Ø§Ù…Ù„: 500 Ø¬Ù†ÙŠÙ‡'], 'https://maps.google.com/?q=30.0444,31.2357')">
                            Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                        </button>
                    
                        
                        <button class="call-btn">ğŸ“ Ø§ØªØµÙ„ Ø§Ù„Ø¢Ù†</button>
                        <button class="whatsapp-btn" id="whatsappButton">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</button>
                    </div>
                
                    <div class="maintenance-center" data-name="Speedy Repairs" data-rating="4.5" data-location="Alexandria">
                        <h2>Speedy Repairs</h2>
                        <p>ğŸ“ 45 Ø´Ø§Ø±Ø¹ Ø§Ù„Ø«ÙˆØ±Ø©ØŒ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</p>
                        <p>â­ 4.5 (98 ØªÙ‚ÙŠÙŠÙ…)</p>
                        <button onclick="openDetails('Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙƒØ²', 'Ø¹Ù†ÙˆØ§Ù†Ù‡', 'Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù…Ù„', ['Ø§Ù„Ø®Ø¯Ù…Ø© 1', 'Ø§Ù„Ø®Ø¯Ù…Ø© 2'], ['Ø§Ù„Ø³Ø¹Ø± 1', 'Ø§Ù„Ø³Ø¹Ø± 2'], 'Ø±Ø§Ø¨Ø· Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„')">
                            Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                        </button>
                        
                        <button class="call-btn">ğŸ“ Ø§ØªØµÙ„ Ø§Ù„Ø¢Ù†</button>
                        <button class="whatsapp-btn" id="whatsappButton">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</button>
        
                    </div>
                
                    <div class="maintenance-center" data-name="QuickFix Motors" data-rating="4.7" data-location="Giza">
                        <h2>QuickFix Motors</h2>
                        <p>ğŸ“ 10 Ø´Ø§Ø±Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±ØŒ Ø§Ù„Ø¬ÙŠØ²Ø©</p>
                        <p>â­ 4.7 (120 ØªÙ‚ÙŠÙŠÙ…)</p>
                        <button onclick="openDetails('Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙƒØ²', 'Ø¹Ù†ÙˆØ§Ù†Ù‡', 'Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ù…Ù„', ['Ø§Ù„Ø®Ø¯Ù…Ø© 1', 'Ø§Ù„Ø®Ø¯Ù…Ø© 2'], ['Ø§Ù„Ø³Ø¹Ø± 1', 'Ø§Ù„Ø³Ø¹Ø± 2'], 'Ø±Ø§Ø¨Ø· Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„')">
                            Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                        </button>
                        
                        <button class="call-btn">ğŸ“ Ø§ØªØµÙ„ Ø§Ù„Ø¢Ù†</button>
                        <button class="whatsapp-btn" id="whatsappButton">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</button>
                    </div>
                </div>

                <div  class="review-btn">Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…</button>
 
                    <div class="reviews">
                        <h3>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª:</h3>
                        <ul class="review-list">
                            <li>â­ â­ â­ â­ â­ - "Ø®Ø¯Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©!"</li>
                            <li>â­ â­ â­ â­ - "Ø§Ù„Ø³Ø¹Ø± Ù…Ø±ØªÙØ¹ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„ÙƒÙ† Ø§Ù„Ø®Ø¯Ù…Ø© Ø¬ÙŠØ¯Ø©."</li>
                        </ul>
                    </div>
                </div>
                
                <!-- ÙÙˆØ±Ù… Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ… -->
                <div id="review-modal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…Ùƒ</h2>
                        <select id="rating">
                            <option value="5">â­ â­ â­ â­ â­</option>
                            <option value="4">â­ â­ â­ â­</option>
                            <option value="3">â­ â­ â­</option>
                            <option value="2">â­ â­</option>
                            <option value="1">â­</option>
                        </select>
                        <textarea id="review-text" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..."></textarea>
                        <button id="submit-review">Ø¥Ø±Ø³Ø§Ù„</button>
                    </div>
                </div>
                


            </section>
        </main>
    </div>

    <script src="js/frontend_api.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            try {
                const response = await fetch("http://127.0.0.1:5000/api/maintenance-centers");
                const centers = await response.json();

                console.log("Loaded maintenance centers:", centers); // Debugging

                const allCentersContainer = document.getElementById("all-centers");
                const recentlyViewedContainer = document.getElementById("recently-viewed");

                centers.forEach((center, index) => {
                    const card = document.createElement("div");
                    card.className = "card";
                    card.innerHTML = `
                        <i class="fas fa-tools"></i> ${center.name} 
                        <br>ğŸ“ Location: ${center.latitude}, ${center.longitude}
                    `;

                    allCentersContainer.appendChild(card);

                    // Simulate recently viewed centers (first 3 centers)
                    if (index < 3) {
                        recentlyViewedContainer.appendChild(card.cloneNode(true));
                    }
                });

            } catch (error) {
                console.error("Error loading maintenance centers:", error);


                


            }
        });

        function openDetails(name, address, status, services, prices, mapLink) {
    const params = new URLSearchParams();
    params.append("name", name);
    params.append("address", address);
    params.append("status", status);
    params.append("services", JSON.stringify(services));
    params.append("prices", JSON.stringify(prices));
    params.append("mapLink", mapLink);

    window.location.href = `center-details.html?${params.toString()}`;
}

    </script>
    
</body>
</html>